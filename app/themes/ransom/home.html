<section data-testid="home-page">
  <div class="page-container torn-paper">
  <div class="section">
    <div class="section-title">
      <span class="cutout cutout-black" style="font-family: 'Bebas Neue'; --rot: -2deg;">COLLECTIONS</span>
      <span class="cutout" style="font-family: 'Playfair Display'; font-weight: 900; --rot: 3deg;">FOR</span>
      <span class="cutout cutout-red" style="font-family: 'Anton'; --rot: -1deg;">RANSOM</span>
    </div>

    <% if ((collections ?? []).length === 0) { %>
      <div class="empty-state">
        <p>NO COLLECTIONS AVAILABLE // Nothing to ransom yet...</p>
      </div>
    <% } else { %>
      <div class="collections-grid" data-testid="collections">
        <% (collections ?? []).forEach((collection, index) => { %>
          <!-- Insert artist bio at 3rd position (index 2) -->
          <% if (index === 2) { %>
            <div class="artist-bio-card pinned-note">
              <% if (CONFIG.artist_avatar_url) { %>
                <div class="artist-avatar">
                  <img src="<%= CONFIG.artist_avatar_url %>" alt="<%= CONFIG.artist_name %>" />
                </div>
              <% } %>
              <h3>ABOUT THE ARTIST</h3>
              <% if (artist.about) { %>
                <p data-testid="artist-about"><%= artist.about %></p>
              <% } else { %>
                <p>Digital artifacts preserved forever on the blockchain.</p>
              <% } %>
              <div class="signature">- <%= CONFIG.artist_name %></div>
              <% if (artist.socials.websiteUrl || artist.socials.xUrl || artist.socials.githubUrl) { %>
                <div class="artist-links" data-testid="artist-social">
                  <% if (artist.socials.websiteUrl) { %>
                    <a href="<%= artist.socials.websiteUrl %>" target="_blank" rel="noopener" data-testid="artist-social-website">Website</a>
                  <% } %>
                  <% if (artist.socials.xUrl) { %>
                    <a href="<%= artist.socials.xUrl %>" target="_blank" rel="noopener" data-testid="artist-social-x">X</a>
                  <% } %>
                  <% if (artist.socials.githubUrl) { %>
                    <a href="<%= artist.socials.githubUrl %>" target="_blank" rel="noopener" data-testid="artist-social-github">GitHub</a>
                  <% } %>
                </div>
              <% } %>
            </div>
          <% } %>
          <a
            class="collection-card"
            href="/<%= encodeURIComponent(collection.slug) %>"
            data-testid="collection-card"
            data-collection-slug="<%= collection.slug %>"
          >
            <div class="tape tape-tl"></div>
            <div class="tape tape-tr"></div>
            <div class="collection-thumb">
              <% if (collection.hasGallery) { %>
                GALLERY
              <% } else if (collection.hasParent) { %>
                PARENT
              <% } else { %>
                LIST
              <% } %>
            </div>
            <div class="collection-name">
              <% const titleWords = collection.title.split(' '); %>
              <% const cutoutStyles = ['cutout', 'cutout cutout-black', 'cutout cutout-red', 'cutout cutout-yellow']; %>
              <% const fontStyles = ["'Bebas Neue'", "'Playfair Display'", "'Anton'", "'Special Elite'", "'Permanent Marker'", "'Courier Prime'"]; %>
              <% const rotations = [-1, 2, -2, 3, 1, -3]; %>
              <% titleWords.forEach((word, i) => { %>
                <% const colorOffset = (index + i) % cutoutStyles.length; %>
                <span class="<%= cutoutStyles[colorOffset] %>" style="font-family: <%= fontStyles[i % fontStyles.length] %>; --rot: <%= rotations[i % rotations.length] %>deg;" data-testid="collection-title"><%= word %></span>
              <% }); %>
            </div>
            <div class="collection-count"><%= collection.availableCount %> inscriptions</div>
            <div class="collection-price" data-testid="collection-price"><%= formatSats(collection.priceSats).replace(' sats', '') %> sats</div>
          </a>
        <% }) %>
        <!-- If less than 3 collections, show artist bio at the end -->
        <% if ((collections ?? []).length < 3) { %>
          <div class="artist-bio-card pinned-note">
            <% if (CONFIG.artist_avatar_url) { %>
              <div class="artist-avatar">
                <img src="<%= CONFIG.artist_avatar_url %>" alt="<%= CONFIG.artist_name %>" />
              </div>
            <% } %>
            <h3>ABOUT THE ARTIST</h3>
            <% if (artist.about) { %>
              <p data-testid="artist-about"><%= artist.about %></p>
            <% } else { %>
              <p>Digital artifacts preserved forever on the blockchain.</p>
            <% } %>
            <div class="signature">- <%= CONFIG.artist_name %></div>
            <% if (artist.socials.websiteUrl || artist.socials.xUrl || artist.socials.githubUrl) { %>
              <div class="artist-links" data-testid="artist-social">
                <% if (artist.socials.websiteUrl) { %>
                  <a href="<%= artist.socials.websiteUrl %>" target="_blank" rel="noopener" data-testid="artist-social-website">Website</a>
                <% } %>
                <% if (artist.socials.xUrl) { %>
                  <a href="<%= artist.socials.xUrl %>" target="_blank" rel="noopener" data-testid="artist-social-x">X</a>
                <% } %>
                <% if (artist.socials.githubUrl) { %>
                  <a href="<%= artist.socials.githubUrl %>" target="_blank" rel="noopener" data-testid="artist-social-github">GitHub</a>
                <% } %>
              </div>
            <% } %>
          </div>
        <% } %>
      </div>
    <% } %>
  </div>
  </div>
</section>
