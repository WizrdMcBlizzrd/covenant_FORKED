<section data-testid="inscriptions-page">
  <h2 class="sr-only" data-testid="page-title">Collection</h2>

  <div class="page-container torn-paper">
  <div class="section">
    <!-- Collection Header -->
    <div class="collection-header-window">
      <div class="tape tape-tl"></div>
      <div class="tape tape-tr"></div>
      <div class="collection-header-content">
        <div class="collection-header-info">
          <div class="collection-header-title">
            <% const titleWords = collection.title.split(' '); %>
            <% const cutoutStyles = ['cutout', 'cutout cutout-black', 'cutout cutout-red', 'cutout cutout-yellow']; %>
            <% const fontStyles = ["'Bebas Neue'", "'Playfair Display'", "'Anton'", "'Special Elite'"]; %>
            <% const rotations = [-1, 2, -2, 3, 1, -3]; %>
            <% const slugOffset = collection.slug.charCodeAt(0) % cutoutStyles.length; %>
            <% titleWords.forEach((word, i) => { %>
              <% const colorOffset = (slugOffset + i) % cutoutStyles.length; %>
              <span class="<%= cutoutStyles[colorOffset] %>" style="font-family: <%= fontStyles[i % fontStyles.length] %>; --rot: <%= rotations[i % rotations.length] %>deg;"><%= word %></span>
            <% }); %>
          </div>
          <p class="collection-header-desc">
            <% if (collection.parent_inscription_id || collection.gallery_inscription_id) { %>
              <% const isGallery = Boolean(collection.gallery_inscription_id) %>
              <% if (isGallery) { %>
                <%= new Intl.NumberFormat('en-US').format(parentInscription.galleryCount) %> inscriptions in this gallery.
              <% } else { %>
                <%= new Intl.NumberFormat('en-US').format(parentInscription.childCount) %> inscriptions from parent.
              <% } %>
            <% } %>
            Preserved forever on the timechain. No negotiations.
          </p>
          <div class="collection-header-stats">
            <div class="header-stat">
              <div class="header-stat-value"><%= collection.itemsCount ?? 0 %></div>
              <div class="header-stat-label">Available</div>
            </div>
            <div class="header-stat">
              <div class="header-stat-value"><%= formatSats(collection.price_sats).replace(' sats', '') %></div>
              <div class="header-stat-label">Floor (sats)</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Inscriptions Grid -->
    <% if ((collection.itemsCount ?? 0) === 0) { %>
      <div class="empty-state" data-testid="empty-state">
        <p data-testid="empty-title">NO INSCRIPTIONS AVAILABLE // All ransomed...</p>
      </div>
    <% } else { %>
      <div class="inscription-grid" data-testid="grid">
        <%- collection.itemsHtml %>
      </div>

      <!-- Pagination -->
      <% if ((pagination.totalPages ?? 1) > 1) { %>
        <div class="pagination" data-testid="pagination">
          <a href="<%= pagination.prevUrl %>" class="page-btn <%= pagination.hasPrev ? '' : 'disabled' %>" data-action="click->store#paginate" data-testid="prev-page">PREV</a>
          <% if ((pagination.pages ?? []).length > 0) { %>
            <% pagination.pages.forEach((pageLink) => { %>
              <% if (pageLink.type !== 'gap') { %>
                <a href="<%= pageLink.url %>" class="page-btn <%= pageLink.isActive ? 'active' : '' %>" data-action="click->store#paginate" data-testid="page-link"><%= pageLink.n %></a>
              <% } %>
            <% }) %>
          <% } %>
          <a href="<%= pagination.nextUrl %>" class="page-btn <%= pagination.hasNext ? '' : 'disabled' %>" data-action="click->store#paginate" data-testid="next-page">NEXT</a>
        </div>
      <% } %>
    <% } %>
  </div>
  </div>
</section>
