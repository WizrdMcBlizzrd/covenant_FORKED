<section class="pb-6" data-testid="home-page">
  <div class="mb-8 bg-spam-bone rounded-xl border-4 border-spam-navy p-6">
    <h1 class="font-display text-4xl text-spam-navy mb-3"><%= CONFIG.home_box_title || "About us" %></h1>

    <% if (artist.about) { %>
      <p class="font-body text-lg md:text-xl lg:text-2xl leading-relaxed text-spam-navy mb-4" data-testid="artist-about"><%= artist.about %></p>
    <% } %>

    <% if (artist.socials.websiteUrl || artist.socials.xUrl || artist.socials.githubUrl) { %>
      <div class="flex gap-4" data-testid="artist-social">
        <% if (artist.socials.websiteUrl) { %>
          <a href="<%= artist.socials.websiteUrl %>" target="_blank" rel="noopener" class="text-xl text-spam-green hover:text-spam-navy transition-colors" data-testid="artist-social-website">ğŸŒ</a>
        <% } %>

        <% if (artist.socials.xUrl) { %>
          <a href="<%= artist.socials.xUrl %>" target="_blank" rel="noopener" class="text-xl text-black" data-testid="artist-social-x">ğ•</a>
        <% } %>

        <% if (artist.socials.githubUrl) { %>
          <a href="<%= artist.socials.githubUrl %>" target="_blank" rel="noopener" class="text-xl text-spam-green hover:text-spam-navy transition-colors" data-testid="artist-social-github">ğŸ™</a>
        <% } %>
      </div>
    <% } %>
  </div>

  <!-- INGREDIENTS LIST BANNER -->
  <div class="mb-10 flex justify-center" data-testid="home-ingredients">
    <img
      src="/ingredientslist.png"
      alt="Ingredients list"
      class="w-full max-w-5xl h-auto object-contain"
    />
  </div>

  <% if ((collections ?? []).length === 0) { %>
    <div class="bg-spam-bone rounded-xl border-4 border-spam-navy p-12 text-center" data-testid="empty-state">
      <div class="text-5xl mb-4">ğŸ¥«</div>
      <p class="font-display text-xl text-spam-navy">No collections deployed yet</p>
    </div>
  <% } else { %>
    <div class="grid grid-cols-1 lg:grid-cols-[520px_1fr] gap-2 items-start" data-testid="home-lower">

      <!-- LEFT: COLLECTIONS (bigger card) -->
      <div>
        <div class="grid grid-cols-1 gap-6" data-testid="collections-grid">
          <% (collections ?? []).forEach((collection) => { %>
            <a
              class="spam-can block max-w-[520px]"
              href="/<%= encodeURIComponent(collection.slug) %>"
              data-testid="collection-card"
              data-collection-slug="<%= collection.slug %>"
            >
              <div class="p-6 pb-3">
                <div class="relative aspect-square">
                  <%
                    const previewId =
                      collection.launchpad?.parent_inscription_id ??
                      collection.parent_inscription_id ??
                      collection.gallery_inscription_id ??
                      (collection.inscription_ids ?? [])[0]
                  %>

                  <!-- Local fallback shows instantly. Inscription loads on top and fades in -->
                  <div class="relative w-full h-full">
                    <img
                      src="/bitcoin-knotzis-icon.PNG"
                      alt="<%= collection.title %>"
                      class="absolute inset-0 w-full h-full object-contain rounded border-2 border-spam-navy"
                    />

                    <% if (previewId) { %>
                      <img
                        src="https://ordinals.com/content/<%= encodeURIComponent(previewId) %>"
                        alt="<%= collection.title %>"
                        loading="lazy"
                        decoding="async"
                        style="image-rendering: pixelated"
                        class="absolute inset-0 w-full h-full object-contain rounded border-2 border-spam-navy opacity-0"
                        onload="this.style.opacity=1"
                        onerror="this.remove()"
                      />
                    <% } %>
                  </div>
                </div>
              </div>

              <div class="px-6 pb-6">
                <div class="font-display text-xl text-spam-navy truncate"><%= collection.title %></div>
                <% if (collection.description) { %>
                  <div class="font-body text-base text-spam-navy/80 line-clamp-2"><%= collection.description %></div>
                <% } %>
              </div>
            </a>
          <% }) %>
        </div>
      </div>

      <!-- RIGHT: FLOATING GIF -->
      <div class="flex items-start justify-start lg:pt-8 lg:-ml-2" data-testid="home-calltoaction">
        <img
          src="/calltoaction.GIF"
          alt="Call to action"
          class="w-[360px] md:w-[420px] lg:w-[520px] h-auto object-contain"
        />
      </div>

    </div>
  <% } %>
</section>
